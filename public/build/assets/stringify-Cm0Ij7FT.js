var I=String.prototype.replace,K=/%20/g,R={RFC1738:"RFC1738",RFC3986:"RFC3986"},H={default:R.RFC3986,formatters:{RFC1738:function(o){return I.call(o,K,"+")},RFC3986:function(o){return String(o)}},RFC1738:R.RFC1738,RFC3986:R.RFC3986},V=H,D=Object.prototype.hasOwnProperty,b=Array.isArray,y=function(){for(var o=[],e=0;e<256;++e)o.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return o}(),k=function(e){for(;e.length>1;){var n=e.pop(),r=n.obj[n.prop];if(b(r)){for(var i=[],f=0;f<r.length;++f)typeof r[f]<"u"&&i.push(r[f]);n.obj[n.prop]=i}}},$=function(e,n){for(var r=n&&n.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(r[i]=e[i]);return r},G=function o(e,n,r){if(!n)return e;if(typeof n!="object"){if(b(e))e.push(n);else if(e&&typeof e=="object")(r&&(r.plainObjects||r.allowPrototypes)||!D.call(Object.prototype,n))&&(e[n]=!0);else return[e,n];return e}if(!e||typeof e!="object")return[e].concat(n);var i=e;return b(e)&&!b(n)&&(i=$(e,r)),b(e)&&b(n)?(n.forEach(function(f,a){if(D.call(e,a)){var l=e[a];l&&typeof l=="object"&&f&&typeof f=="object"?e[a]=o(l,f,r):e.push(f)}else e[a]=f}),e):Object.keys(n).reduce(function(f,a){var l=n[a];return D.call(f,a)?f[a]=o(f[a],l,r):f[a]=l,f},i)},W=function(e,n){return Object.keys(n).reduce(function(r,i){return r[i]=n[i],r},e)},_=function(o,e,n){var r=o.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},q=function(e,n,r,i,f){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),r==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(d){return"%26%23"+parseInt(d.slice(2),16)+"%3B"});for(var l="",s=0;s<a.length;++s){var t=a.charCodeAt(s);if(t===45||t===46||t===95||t===126||t>=48&&t<=57||t>=65&&t<=90||t>=97&&t<=122||f===V.RFC1738&&(t===40||t===41)){l+=a.charAt(s);continue}if(t<128){l=l+y[t];continue}if(t<2048){l=l+(y[192|t>>6]+y[128|t&63]);continue}if(t<55296||t>=57344){l=l+(y[224|t>>12]+y[128|t>>6&63]+y[128|t&63]);continue}s+=1,t=65536+((t&1023)<<10|a.charCodeAt(s)&1023),l+=y[240|t>>18]+y[128|t>>12&63]+y[128|t>>6&63]+y[128|t&63]}return l},L=function(e){for(var n=[{obj:{o:e},prop:"o"}],r=[],i=0;i<n.length;++i)for(var f=n[i],a=f.obj[f.prop],l=Object.keys(a),s=0;s<l.length;++s){var t=l[s],d=a[t];typeof d=="object"&&d!==null&&r.indexOf(d)===-1&&(n.push({obj:a,prop:t}),r.push(d))}return k(n),e},X=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Y=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Z=function(e,n){return[].concat(e,n)},J=function(e,n){if(b(e)){for(var r=[],i=0;i<e.length;i+=1)r.push(n(e[i]));return r}return n(e)},ee={arrayToObject:$,assign:W,combine:Z,compact:L,decode:_,encode:q,isBuffer:Y,isRegExp:X,maybeMap:J,merge:G},E=ee,g=H,re=Object.prototype.hasOwnProperty,z={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,n){return e+"["+n+"]"},repeat:function(e){return e}},m=Array.isArray,ne=String.prototype.split,te=Array.prototype.push,M=function(o,e){te.apply(o,m(e)?e:[e])},ie=Date.prototype.toISOString,A=g.default,c={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:E.encode,encodeValuesOnly:!1,format:A,formatter:g.formatters[A],indices:!1,serializeDate:function(e){return ie.call(e)},skipNulls:!1,strictNullHandling:!1},ae=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},oe=function o(e,n,r,i,f,a,l,s,t,d,p,v,O,x){var u=e;if(typeof l=="function"?u=l(n,u):u instanceof Date?u=d(u):r==="comma"&&m(u)&&(u=E.maybeMap(u,function(w){return w instanceof Date?d(w):w})),u===null){if(i)return a&&!O?a(n,c.encoder,x,"key",p):n;u=""}if(ae(u)||E.isBuffer(u)){if(a){var N=O?n:a(n,c.encoder,x,"key",p);if(r==="comma"&&O){for(var T=ne.call(String(u),","),P="",S=0;S<T.length;++S)P+=(S===0?"":",")+v(a(T[S],c.encoder,x,"value",p));return[v(N)+"="+P]}return[v(N)+"="+v(a(u,c.encoder,x,"value",p))]}return[v(n)+"="+v(String(u))]}var j=[];if(typeof u>"u")return j;var F;if(r==="comma"&&m(u))F=[{value:u.length>0?u.join(",")||null:void 0}];else if(m(l))F=l;else{var B=Object.keys(u);F=s?B.sort(s):B}for(var C=0;C<F.length;++C){var h=F[C],Q=typeof h=="object"&&typeof h.value<"u"?h.value:u[h];if(!(f&&Q===null)){var U=m(u)?typeof r=="function"?r(n,h):n:n+(t?"."+h:"["+h+"]");M(j,o(Q,U,r,i,f,a,l,s,t,d,p,v,O,x))}}return j},fe=function(e){if(!e)return c;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var n=e.charset||c.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=g.default;if(typeof e.format<"u"){if(!re.call(g.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var i=g.formatters[r],f=c.filter;return(typeof e.filter=="function"||m(e.filter))&&(f=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:c.addQueryPrefix,allowDots:typeof e.allowDots>"u"?c.allowDots:!!e.allowDots,charset:n,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:c.charsetSentinel,delimiter:typeof e.delimiter>"u"?c.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:c.encode,encoder:typeof e.encoder=="function"?e.encoder:c.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:c.encodeValuesOnly,filter:f,format:r,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:c.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:c.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:c.strictNullHandling}},le=function(o,e){var n=o,r=fe(e),i,f;typeof r.filter=="function"?(f=r.filter,n=f("",n)):m(r.filter)&&(f=r.filter,i=f);var a=[];if(typeof n!="object"||n===null)return"";var l;e&&e.arrayFormat in z?l=e.arrayFormat:e&&"indices"in e?l=e.indices?"indices":"repeat":l="indices";var s=z[l];i||(i=Object.keys(n)),r.sort&&i.sort(r.sort);for(var t=0;t<i.length;++t){var d=i[t];r.skipNulls&&n[d]===null||M(a,oe(n[d],d,s,r.strictNullHandling,r.skipNulls,r.encode?r.encoder:null,r.filter,r.sort,r.allowDots,r.serializeDate,r.format,r.formatter,r.encodeValuesOnly,r.charset))}var p=a.join(r.delimiter),v=r.addQueryPrefix===!0?"?":"";return r.charsetSentinel&&(r.charset==="iso-8859-1"?v+="utf8=%26%2310003%3B&":v+="utf8=%E2%9C%93&"),p.length>0?v+p:""};export{H as f,le as s,ee as u};
