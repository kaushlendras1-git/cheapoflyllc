import{l as w,s as f}from"./toast-DfVryYpm.js";import{a as v}from"./index-Dq7h7Pqt.js";function o(){return o=Object.assign?Object.assign.bind():function(u){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var r in e)({}).hasOwnProperty.call(e,r)&&(u[r]=e[r])}return u},o.apply(null,arguments)}class y{constructor(t,e,r){var s,i;this.name=t,this.definition=e,this.bindings=(s=e.bindings)!=null?s:{},this.wheres=(i=e.wheres)!=null?i:{},this.config=r}get template(){const t=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return t===""?"/":t}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var t,e;return(t=(e=this.template.match(/{[^}?]+\??}/g))==null?void 0:e.map(r=>({name:r.replace(/{|\??}/g,""),required:!/\?}$/.test(r)})))!=null?t:[]}matchesUrl(t){var e;if(!this.definition.methods.includes("GET"))return!1;const r=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(a,g,c,d)=>{var h;const l=`(?<${c}>${((h=this.wheres[c])==null?void 0:h.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return d?`(${g}${l})?`:`${g}${l}`}).replace(/^\w+:\/\//,""),[s,i]=t.replace(/^\w+:\/\//,"").split("?"),n=(e=new RegExp(`^${r}/?$`).exec(s))!=null?e:new RegExp(`^${r}/?$`).exec(decodeURI(s));if(n){for(const a in n.groups)n.groups[a]=typeof n.groups[a]=="string"?decodeURIComponent(n.groups[a]):n.groups[a];return{params:n.groups,query:w.parse(i)}}return!1}compile(t){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(e,r,s)=>{var i,n;if(!s&&[null,void 0].includes(t[r]))throw new Error(`Ziggy error: '${r}' parameter is required for route '${this.name}'.`);if(this.wheres[r]&&!new RegExp(`^${s?`(${this.wheres[r]})?`:this.wheres[r]}$`).test((n=t[r])!=null?n:""))throw new Error(`Ziggy error: '${r}' parameter '${t[r]}' does not match required format '${this.wheres[r]}' for route '${this.name}'.`);return encodeURI((i=t[r])!=null?i:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class O extends String{constructor(t,e,r=!0,s){if(super(),this.t=s??(typeof Ziggy<"u"?Ziggy:globalThis?.Ziggy),this.t=o({},this.t,{absolute:r}),t){if(!this.t.routes[t])throw new Error(`Ziggy error: route '${t}' is not in the route list.`);this.i=new y(t,this.t.routes[t],this.t),this.o=this.u(e)}}toString(){const t=Object.keys(this.o).filter(e=>!this.i.parameterSegments.some(({name:r})=>r===e)).filter(e=>e!=="_query").reduce((e,r)=>o({},e,{[r]:this.o[r]}),{});return this.i.compile(this.o)+w.stringify(o({},t,this.o._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(e,r)=>typeof e=="boolean"?Number(e):r(e)})}h(t){t?this.t.absolute&&t.startsWith("/")&&(t=this.l().host+t):t=this.m();let e={};const[r,s]=Object.entries(this.t.routes).find(([i,n])=>e=new y(i,n,this.t).matchesUrl(t))||[void 0,void 0];return o({name:r},e,{route:s})}m(){const{host:t,pathname:e,search:r}=this.l();return(this.t.absolute?t+e:e.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+r}current(t,e){const{name:r,params:s,query:i,route:n}=this.h();if(!t)return r;const a=new RegExp(`^${t.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(r);if([null,void 0].includes(e)||!a)return a;const g=new y(r,n,this.t);e=this.u(e,g);const c=o({},s,i);if(Object.values(e).every(h=>!h)&&!Object.values(c).some(h=>h!==void 0))return!0;const d=(h,l)=>Object.entries(h).every(([p,m])=>Array.isArray(m)&&Array.isArray(l[p])?m.every(b=>l[p].includes(b)):typeof m=="object"&&typeof l[p]=="object"&&m!==null&&l[p]!==null?d(m,l[p]):l[p]==m);return d(e,c)}l(){var t,e,r,s,i,n;const{host:a="",pathname:g="",search:c=""}=typeof window<"u"?window.location:{};return{host:(t=(e=this.t.location)==null?void 0:e.host)!=null?t:a,pathname:(r=(s=this.t.location)==null?void 0:s.pathname)!=null?r:g,search:(i=(n=this.t.location)==null?void 0:n.search)!=null?i:c}}get params(){const{params:t,query:e}=this.h();return o({},t,e)}get routeParams(){return this.h().params}get queryParams(){return this.h().query}has(t){return this.t.routes.hasOwnProperty(t)}u(t={},e=this.i){t!=null||(t={}),t=["string","number"].includes(typeof t)?[t]:t;const r=e.parameterSegments.filter(({name:s})=>!this.t.defaults[s]);return Array.isArray(t)?t=t.reduce((s,i,n)=>o({},s,r[n]?{[r[n].name]:i}:typeof i=="object"?i:{[i]:""}),{}):r.length!==1||t[r[0].name]||!t.hasOwnProperty(Object.values(e.bindings)[0])&&!t.hasOwnProperty("id")||(t={[r[0].name]:t}),o({},this.$(e),this.p(t,e))}$(t){return t.parameterSegments.filter(({name:e})=>this.t.defaults[e]).reduce((e,{name:r},s)=>o({},e,{[r]:this.t.defaults[r]}),{})}p(t,{bindings:e,parameterSegments:r}){return Object.entries(t).reduce((s,[i,n])=>{if(!n||typeof n!="object"||Array.isArray(n)||!r.some(({name:a})=>a===i))return o({},s,{[i]:n});if(!n.hasOwnProperty(e[i])){if(!n.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${i}' parameter is missing route model binding key '${e[i]}'.`);e[i]="id"}return o({},s,{[i]:n[e[i]]})},{})}valueOf(){return this.toString()}}function j(u,t,e,r){const s=new O(u,t,e,r);return u?s.toString():s}$("#bookingForm").submit(async function(u){u.preventDefault();const t=new FormData(u.target);try{const e=await v.post(u.target.action,t);console.log(e.data),e.status===201?(this.removeAttribute("disabled"),sessionStorage.setItem("successMessage",e.data.message),window.location.href=j(e.data.data.route,{id:e.data.data.id})):f("Something went wrong","error")}catch(e){console.log(e),e.response.status===422||e.response.status===500?f(e.response.data.error,"error"):f("Something went wrong","error")}});
