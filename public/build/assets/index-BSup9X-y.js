import{u as j,s as S,f as P}from"./stringify-Cm0Ij7FT.js";var y=j,w=Object.prototype.hasOwnProperty,x=Array.isArray,h={allowDots:!1,allowPrototypes:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:y.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},A=function(l){return l.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},$=function(l,e){return l&&typeof l=="string"&&e.comma&&l.indexOf(",")>-1?l.split(","):l},E="utf8=%26%2310003%3B",N="utf8=%E2%9C%93",L=function(e,r){var t={},a=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,n=r.parameterLimit===1/0?void 0:r.parameterLimit,i=a.split(r.delimiter,n),u=-1,s,c=r.charset;if(r.charsetSentinel)for(s=0;s<i.length;++s)i[s].indexOf("utf8=")===0&&(i[s]===N?c="utf-8":i[s]===E&&(c="iso-8859-1"),u=s,s=i.length);for(s=0;s<i.length;++s)if(s!==u){var f=i[s],d=f.indexOf("]="),m=d===-1?f.indexOf("="):d+1,p,o;m===-1?(p=r.decoder(f,h.decoder,c,"key"),o=r.strictNullHandling?null:""):(p=r.decoder(f.slice(0,m),h.decoder,c,"key"),o=y.maybeMap($(f.slice(m+1),r),function(v){return r.decoder(v,h.decoder,c,"value")})),o&&r.interpretNumericEntities&&c==="iso-8859-1"&&(o=A(o)),f.indexOf("[]=")>-1&&(o=x(o)?[o]:o),w.call(t,p)?t[p]=y.combine(t[p],o):t[p]=o}return t},q=function(l,e,r,t){for(var a=t?e:$(e,r),n=l.length-1;n>=0;--n){var i,u=l[n];if(u==="[]"&&r.parseArrays)i=[].concat(a);else{i=r.plainObjects?Object.create(null):{};var s=u.charAt(0)==="["&&u.charAt(u.length-1)==="]"?u.slice(1,-1):u,c=parseInt(s,10);!r.parseArrays&&s===""?i={0:a}:!isNaN(c)&&u!==s&&String(c)===s&&c>=0&&r.parseArrays&&c<=r.arrayLimit?(i=[],i[c]=a):s!=="__proto__"&&(i[s]=a)}a=i}return a},D=function(e,r,t,a){if(e){var n=t.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,i=/(\[[^[\]]*])/,u=/(\[[^[\]]*])/g,s=t.depth>0&&i.exec(n),c=s?n.slice(0,s.index):n,f=[];if(c){if(!t.plainObjects&&w.call(Object.prototype,c)&&!t.allowPrototypes)return;f.push(c)}for(var d=0;t.depth>0&&(s=u.exec(n))!==null&&d<t.depth;){if(d+=1,!t.plainObjects&&w.call(Object.prototype,s[1].slice(1,-1))&&!t.allowPrototypes)return;f.push(s[1])}return s&&f.push("["+n.slice(s.index)+"]"),q(f,r,t,a)}},I=function(e){if(!e)return h;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?h.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?h.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:h.allowPrototypes,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:h.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:h.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:h.comma,decoder:typeof e.decoder=="function"?e.decoder:h.decoder,delimiter:typeof e.delimiter=="string"||y.isRegExp(e.delimiter)?e.delimiter:h.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:h.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:h.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:h.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:h.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:h.strictNullHandling}},Q=function(l,e){var r=I(e);if(l===""||l===null||typeof l>"u")return r.plainObjects?Object.create(null):{};for(var t=typeof l=="string"?L(l,r):l,a=r.plainObjects?Object.create(null):{},n=Object.keys(t),i=0;i<n.length;++i){var u=n[i],s=D(u,t[u],r,typeof l=="string");a=y.merge(a,s,r)}return y.compact(a)},Z=S,_=Q,H=P,O={formats:H,parse:_,stringify:Z};function g(){return g=Object.assign?Object.assign.bind():function(l){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)({}).hasOwnProperty.call(r,t)&&(l[t]=r[t])}return l},g.apply(null,arguments)}class b{constructor(e,r,t){var a,n;this.name=e,this.definition=r,this.bindings=(a=r.bindings)!=null?a:{},this.wheres=(n=r.wheres)!=null?n:{},this.config=t}get template(){const e=`${this.origin}/${this.definition.uri}`.replace(/\/+$/,"");return e===""?"/":e}get origin(){return this.config.absolute?this.definition.domain?`${this.config.url.match(/^\w+:\/\//)[0]}${this.definition.domain}${this.config.port?`:${this.config.port}`:""}`:this.config.url:""}get parameterSegments(){var e,r;return(e=(r=this.template.match(/{[^}?]+\??}/g))==null?void 0:r.map(t=>({name:t.replace(/{|\??}/g,""),required:!/\?}$/.test(t)})))!=null?e:[]}matchesUrl(e){var r;if(!this.definition.methods.includes("GET"))return!1;const t=this.template.replace(/[.*+$()[\]]/g,"\\$&").replace(/(\/?){([^}?]*)(\??)}/g,(u,s,c,f)=>{var d;const m=`(?<${c}>${((d=this.wheres[c])==null?void 0:d.replace(/(^\^)|(\$$)/g,""))||"[^/?]+"})`;return f?`(${s}${m})?`:`${s}${m}`}).replace(/^\w+:\/\//,""),[a,n]=e.replace(/^\w+:\/\//,"").split("?"),i=(r=new RegExp(`^${t}/?$`).exec(a))!=null?r:new RegExp(`^${t}/?$`).exec(decodeURI(a));if(i){for(const u in i.groups)i.groups[u]=typeof i.groups[u]=="string"?decodeURIComponent(i.groups[u]):i.groups[u];return{params:i.groups,query:O.parse(n)}}return!1}compile(e){return this.parameterSegments.length?this.template.replace(/{([^}?]+)(\??)}/g,(r,t,a)=>{var n,i;if(!a&&[null,void 0].includes(e[t]))throw new Error(`Ziggy error: '${t}' parameter is required for route '${this.name}'.`);if(this.wheres[t]&&!new RegExp(`^${a?`(${this.wheres[t]})?`:this.wheres[t]}$`).test((i=e[t])!=null?i:""))throw new Error(`Ziggy error: '${t}' parameter '${e[t]}' does not match required format '${this.wheres[t]}' for route '${this.name}'.`);return encodeURI((n=e[t])!=null?n:"").replace(/%7C/g,"|").replace(/%25/g,"%").replace(/\$/g,"%24")}).replace(this.config.absolute?/(\.[^/]+?)(\/\/)/:/(^)(\/\/)/,"$1/").replace(/\/+$/,""):this.template}}class T extends String{constructor(e,r,t=!0,a){if(super(),this.t=a??(typeof Ziggy<"u"?Ziggy:globalThis==null?void 0:globalThis.Ziggy),this.t=g({},this.t,{absolute:t}),e){if(!this.t.routes[e])throw new Error(`Ziggy error: route '${e}' is not in the route list.`);this.i=new b(e,this.t.routes[e],this.t),this.o=this.u(r)}}toString(){const e=Object.keys(this.o).filter(r=>!this.i.parameterSegments.some(({name:t})=>t===r)).filter(r=>r!=="_query").reduce((r,t)=>g({},r,{[t]:this.o[t]}),{});return this.i.compile(this.o)+O.stringify(g({},e,this.o._query),{addQueryPrefix:!0,arrayFormat:"indices",encodeValuesOnly:!0,skipNulls:!0,encoder:(r,t)=>typeof r=="boolean"?Number(r):t(r)})}h(e){e?this.t.absolute&&e.startsWith("/")&&(e=this.l().host+e):e=this.m();let r={};const[t,a]=Object.entries(this.t.routes).find(([n,i])=>r=new b(n,i,this.t).matchesUrl(e))||[void 0,void 0];return g({name:t},r,{route:a})}m(){const{host:e,pathname:r,search:t}=this.l();return(this.t.absolute?e+r:r.replace(this.t.url.replace(/^\w*:\/\/[^/]+/,""),"").replace(/^\/+/,"/"))+t}current(e,r){const{name:t,params:a,query:n,route:i}=this.h();if(!e)return t;const u=new RegExp(`^${e.replace(/\./g,"\\.").replace(/\*/g,".*")}$`).test(t);if([null,void 0].includes(r)||!u)return u;const s=new b(t,i,this.t);r=this.u(r,s);const c=g({},a,n);if(Object.values(r).every(d=>!d)&&!Object.values(c).some(d=>d!==void 0))return!0;const f=(d,m)=>Object.entries(d).every(([p,o])=>Array.isArray(o)&&Array.isArray(m[p])?o.every(v=>m[p].includes(v)):typeof o=="object"&&typeof m[p]=="object"&&o!==null&&m[p]!==null?f(o,m[p]):m[p]==o);return f(r,c)}l(){var e,r,t,a,n,i;const{host:u="",pathname:s="",search:c=""}=typeof window<"u"?window.location:{};return{host:(e=(r=this.t.location)==null?void 0:r.host)!=null?e:u,pathname:(t=(a=this.t.location)==null?void 0:a.pathname)!=null?t:s,search:(n=(i=this.t.location)==null?void 0:i.search)!=null?n:c}}get params(){const{params:e,query:r}=this.h();return g({},e,r)}get routeParams(){return this.h().params}get queryParams(){return this.h().query}has(e){return this.t.routes.hasOwnProperty(e)}u(e={},r=this.i){e!=null||(e={}),e=["string","number"].includes(typeof e)?[e]:e;const t=r.parameterSegments.filter(({name:a})=>!this.t.defaults[a]);return Array.isArray(e)?e=e.reduce((a,n,i)=>g({},a,t[i]?{[t[i].name]:n}:typeof n=="object"?n:{[n]:""}),{}):t.length!==1||e[t[0].name]||!e.hasOwnProperty(Object.values(r.bindings)[0])&&!e.hasOwnProperty("id")||(e={[t[0].name]:e}),g({},this.$(r),this.p(e,r))}$(e){return e.parameterSegments.filter(({name:r})=>this.t.defaults[r]).reduce((r,{name:t},a)=>g({},r,{[t]:this.t.defaults[t]}),{})}p(e,{bindings:r,parameterSegments:t}){return Object.entries(e).reduce((a,[n,i])=>{if(!i||typeof i!="object"||Array.isArray(i)||!t.some(({name:u})=>u===n))return g({},a,{[n]:i});if(!i.hasOwnProperty(r[n])){if(!i.hasOwnProperty("id"))throw new Error(`Ziggy error: object passed as '${n}' parameter is missing route model binding key '${r[n]}'.`);r[n]="id"}return g({},a,{[n]:i[r[n]]})},{})}valueOf(){return this.toString()}}function U(l,e,r,t){const a=new T(l,e,r,t);return l?a.toString():a}export{U as s};
